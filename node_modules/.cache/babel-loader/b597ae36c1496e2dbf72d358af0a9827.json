{"ast":null,"code":"import { authAPI } from \"../api/api\";\nconst SET_USER_DATA = 'SET_USER_DATA';\nlet initialState = {\n  userId: null,\n  email: null,\n  login: null,\n  isAuth: false\n};\n\nconst authReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_USER_DATA:\n      {\n        return { ...state,\n          ...action.data,\n          isAuth: true\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport const setAuthUserData = (userId, email, login) => ({\n  type: SET_USER_DATA,\n  data: {\n    userId,\n    email,\n    login\n  }\n});\nexport const getAuthUserData = () => {\n  return dispatch => {\n    authAPI.me().then(response => {\n      console.log(response.data);\n\n      if (response.data.resultCode === 0) {\n        let {\n          id,\n          login,\n          email\n        } = response.data.data;\n        dispatch(setAuthUserData(id, email, login));\n      } else {\n        alert('You are not authorise!'); //console.log('you are not authorise!')\n      }\n    });\n  };\n};\nexport default authReducer;","map":{"version":3,"sources":["/Users/zheka/Desktop/projects/react-1/src/redux/auth-reducer.js"],"names":["authAPI","SET_USER_DATA","initialState","userId","email","login","isAuth","authReducer","state","action","type","data","setAuthUserData","getAuthUserData","dispatch","me","then","response","console","log","resultCode","id","alert"],"mappings":"AAAA,SAAQA,OAAR,QAAsB,YAAtB;AAEA,MAAMC,aAAa,GAAG,eAAtB;AAGA,IAAIC,YAAY,GAAG;AACfC,EAAAA,MAAM,EAAE,IADO;AAEfC,EAAAA,KAAK,EAAE,IAFQ;AAGfC,EAAAA,KAAK,EAAE,IAHQ;AAIfC,EAAAA,MAAM,EAAE;AAJO,CAAnB;;AAOA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGN,YAAT,EAAuBO,MAAvB,KAAkC;AAClD,UAAOA,MAAM,CAACC,IAAd;AACI,SAAKT,aAAL;AAAmB;AACf,eAAM,EACF,GAAGO,KADD;AAEF,aAAGC,MAAM,CAACE,IAFR;AAGFL,UAAAA,MAAM,EAAE;AAHN,SAAN;AAKH;;AACD;AACI,aAAOE,KAAP;AATR;AAWH,CAZD;;AAcA,OAAO,MAAMI,eAAe,GAAG,CAACT,MAAD,EAAQC,KAAR,EAAcC,KAAd,MAAuB;AAACK,EAAAA,IAAI,EAACT,aAAN;AAAoBU,EAAAA,IAAI,EAAC;AAACR,IAAAA,MAAD;AAAQC,IAAAA,KAAR;AAAcC,IAAAA;AAAd;AAAzB,CAAvB,CAAxB;AAGP,OAAO,MAAMQ,eAAe,GAAG,MAAI;AAC/B,SAAQC,QAAD,IAAY;AACfd,IAAAA,OAAO,CAACe,EAAR,GACKC,IADL,CACUC,QAAQ,IAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACN,IAArB;;AACA,UAAIM,QAAQ,CAACN,IAAT,CAAcS,UAAd,KAA6B,CAAjC,EAAoC;AAChC,YAAI;AAACC,UAAAA,EAAD;AAAKhB,UAAAA,KAAL;AAAYD,UAAAA;AAAZ,YAAqBa,QAAQ,CAACN,IAAT,CAAcA,IAAvC;AACAG,QAAAA,QAAQ,CAACF,eAAe,CAACS,EAAD,EAAKjB,KAAL,EAAYC,KAAZ,CAAhB,CAAR;AAGH,OALD,MAKO;AACHiB,QAAAA,KAAK,CAAC,wBAAD,CAAL,CADG,CAEH;AACH;AACJ,KAZL;AAaH,GAdD;AAeH,CAhBM;AAkBP,eAAef,WAAf","sourcesContent":["import {authAPI} from \"../api/api\";\n\nconst SET_USER_DATA = 'SET_USER_DATA'\n\n\nlet initialState = {\n    userId: null,\n    email: null,\n    login: null,\n    isAuth: false\n}\n\nconst authReducer = (state = initialState, action) => {\n    switch(action.type){\n        case SET_USER_DATA:{\n            return{\n                ...state,\n                ...action.data,\n                isAuth: true\n            }\n        }\n        default:\n            return state;\n    }\n}\n\nexport const setAuthUserData = (userId,email,login)=>({type:SET_USER_DATA,data:{userId,email,login}})\n\n\nexport const getAuthUserData = ()=>{\n    return (dispatch)=>{\n        authAPI.me()\n            .then(response => {\n                console.log(response.data)\n                if (response.data.resultCode === 0) {\n                    let {id, login, email} = response.data.data;\n                    dispatch(setAuthUserData(id, email, login))\n\n\n                } else {\n                    alert('You are not authorise!')\n                    //console.log('you are not authorise!')\n                }\n            });\n    }\n}\n\nexport default authReducer;"]},"metadata":{},"sourceType":"module"}